\section{Relation on color checking matrices}

In order to ensure that all matrices that stem from the same knot are considered in one equivalence class we must look at how Reidemeister moves change the matrix. 

In this section we will always assume that diagram $D$ has $s$ segments and $x$ crossings. Furthermore, we will always put crossings and segments that are affected by the Reidemeister move as the last columns and rows of the matrix.

\begin{figure}[h!]\centering 
  \textbf{R1a}
  \medskip

  \begin{tikzpicture}
    \begin{knot}[
      consider self intersections,
      clip width=20pt,
      flip crossing=1
      ]
      \strand[->, thick] (0, -1.5) to [out=90, in=-90] 
        (0, -1) to[out=90, in=120] 
        (1, 0.5) to[out=-60, in=60] 
        (1, -0.5) to[out=-120, in=-90] 
        (0, 1) to[out=90, in=-90] (0, 1.5);

      \strand[->, thick] (-3, -1.5) -- (-3, 1.5);
    \end{knot}
    \node at (-.5, 0) {$+$};
    \node at (-3.5, -1.8) {$D$};
    \node at (1, -1.8) {$D'$};

    \node at (-3.5, 0) {$y_s$};
    \node at (-0.3, -1) {$x_s$};
    \node at (0.5, 0.9) {$x_{s+1}$};
  \end{tikzpicture}
\end{figure}

In the case of this Reidemeister move we have 
$$D\phi:M^s\to N^x$$
$$D'\phi:M^{s+1}\to N^{x+1}.$$
Only two arcs have changed thus 
$$D\phi\restriction M^{s-1}=D'\phi\restriction M^{s-1}.$$
Furthermore, we want for any $x_s, x_{s+1}\in M$
$$\pi_{x+1}[D'\phi(0,..., x_s, s_{s+1})]=\phi_+(x_{s+1},x_s,x_{s+1}),$$
where $\pi_{x+1}$ is projection onto the last coordinate, and 
$$(D\phi(0,..., x_s), 0)=D'\phi(0,..., x_s, x_s).$$

\begin{figure}[h!]\centering 
  \textbf{R1b}
  \medskip

  \begin{tikzpicture}
    \begin{knot}[
      consider self intersections,
      clip width=20pt
      ]
      \strand[->, thick] (0, -1.5) to [out=90, in=-90] 
        (0, -1) to[out=90, in=120] 
        (1, 0.5) to[out=-60, in=60] 
        (1, -0.5) to[out=-120, in=-90] 
        (0, 1) to[out=90, in=-90] (0, 1.5);

      \strand[->, thick] (-3, -1.5) -- (-3, 1.5);
    \end{knot}
    \node at (-.5, 0) {$-$};
    \node at (-3.5, -1.8) {$D$};
    \node at (1, -1.8) {$D'$};

    \node at (-3.5, 0) {$y_s$};
    \node at (-0.3, -1) {$x_s$};
    \node at (0.5, 0.9) {$x_{s+1}$};
  \end{tikzpicture}
\end{figure}

This Reidemeister move on oriented diagram is necessary in defining equivalent oriented knot diagrams but the matrix relation is the one in \textbf{R1a} with $\phi_+$ changed to $\phi_-$:
% $$D\phi:M^s\to N^x$$
% $$D'\phi:M^{s+1}\to N^{x+1}.$$
$$D\phi\sim D'\phi$$
$$\text{if and only if}$$
\begin{align*}
  &D\phi\restriction M^{s-1}=D'\phi\restriction M^{s-1}\land\\
  \land&\pi_{x+1}[D'\phi(0,..., x_s, s_{s+1})]=\phi_-(x_{s+1},x_s,x_{s+1})\land\\
  \land&(D\phi(0,..., x_s), 0)=D'\phi(0,..., x_s, x_s).
\end{align*}


\begin{figure}[h!]\centering 
  \textbf{R2}
  \medskip 

  \begin{tikzpicture}
    \begin{knot}[
      consider self intersections,
      clip width=20pt,
      % draft mode=crossings,
      flip crossing=1,
      flip crossing=2
      ]
      \strand[->, thick] (0.8, -2)--(.8, 2);
      \strand[->, thick] (-0.5, -2) to [out=90, in=-120] 
      (1.5, -.25) to[out=60, in=-60] 
      (1.5, .25) to[out=120, in=-90] (-.5, 2);

      \strand[->, thick] (-3, -1.5) -- (-3, 1.5);
      \strand[->, thick] (-4, -1.5)--(-4, 1.5);
    \end{knot}
    \node at (1, -1.1) {$-$};
    \node at (1, 1.1) {$+$}; 
    \node at (-4.5, -2.2) {$D$};
    \node at (1.5, -2.2) {$D'$};

    \node at (-4.6, 0) {$x_{s-1}$};
    \node at (-2.6, 0) {$x_s$};

    \node at (2.1, 0) {$x_{s-1}$};
    \node at (0.3, 0) {$x_{s+1}$}; 
    \node at (0.4, -1.8) {$x_s$};
    \node at (0.3, 1.8) {$x_{s+2}$};
  \end{tikzpicture}
\end{figure}

$$D\phi\sim D'\phi$$
$$\text{if and only if}$$
\begin{align*}
  &D\phi\restriction M^{s-2}=D'\phi\restriction M^{s-2}\land \\ 
  % \land & (\forall x\in M) (D\phi(0,..., x, 0), 0, 0) = \\ 
        % &=D'\phi(0,..., x, 0) - (0,..., \phi_-(x, 0, 0), \phi_+(x, 0, 0))\land\\ 
  \land & (\forall x\in M) D'\phi(0,..., x, y, y, y) =\\ 
        &=(D\phi(0,..., x, y), \phi_-(x, y, y), \phi_+(x, y, y))
\end{align*}

\begin{figure}[h!]\centering 
  \textbf{R3}
  \medskip 

  \begin{tikzpicture}
    \begin{knot}[
      consider self intersections,
      clip width=20pt,
      %draft mode=crossings,
      ignore endpoint intersections=false,
      flip crossing=1,
      flip crossing=2,
      flip crossing=3,
      flip crossing=4,
      flip crossing=5,
      flip crossing=6
      ]
      \strand[->, thick] (0, 0) to [out=45, in=-180+45] (4, 4);
      \strand[<-, thick] (4, 0) to [out=180-45, in=-45] (0, 4);
      \strand[<-, thick] (0, 1) -- (4, 1);

      \strand[->, thick] (6, 0) to [out=45, in=-180+45] (10, 4);
      \strand[<-, thick] (10, 0) to [out=180-45, in=-45] (6, 4);
      \strand[<-, thick] (6, 3) -- (10, 3);
    \end{knot}
    \node at (-0.5, -.2) {$D$};
    \node at (10.5, -.2) {$D'$};

    \node at (2, 2.35) {$-$};
    \node at (1, 0.65) {$+$};
    \node at (3, 1.35) {$-$};

    \node at (2, 0.65) {$x_{s-5}$};
    \node at (1, 3.65) {$x_{s}$};
    \node at (3, 3.65) {$x_{s-1}$};
    \node at (1, 1.65) {$x_{s-2}$};
    \node at (-0.3, 0.35) {$x_{s-3}$};
    \node at (4.3, 0.35) {$x_{s-4}$};

    \node at (8, 1.65) {$-$};
    \node at (9, 3.35) {$+$};
    \node at (7, 2.65) {$-$};

    \node at (2+6, 3.35) {$x_{s-5}$};
    \node at (6, 3.65) {$x_{s}$};
    \node at (10.5, 3.65) {$x_{s-1}$};
    \node at (9.2, 2.15) {$x_{s-2}$};
    \node at (6.5, 1.35) {$x_{s-3}$};
    \node at (4.1+6, 0.55) {$x_{s-4}$};
  \end{tikzpicture}
\end{figure}

$$D\phi\sim D'\phi$$
$$\text{if and only if}$$
\begin{align*}
  &D\phi\restriction M^{s-5}=D'\phi\restriction M^{s-5}\land \\ 
  \land & (\forall\;x,y,z\in M) \pi_{x-3}[D\phi(0,...,x,y,z)]=\\ 
        &= \pi_{x-3}[D'\phi(0,...,z,x,y,0,0)]\land \\ 
  \land & D\phi(0,...., z,y,0,0,0,x)=D'\phi(0,...,z,y,0,0,0,x)\land \\ 
  \land & D\phi(0,...,z,0,y,x,0,0) = D'\phi(0,...,z,0,0,y,x,0)
\end{align*}

\begin{theorem}
  Let $K$ be a knot and $D$ its oriented diagram. Define 
  $$K\phi:=[D\phi]$$
  to be the equivalence class of the matrix $D\phi$. Then, $K\phi$ is a knot invariant.
\end{theorem}


