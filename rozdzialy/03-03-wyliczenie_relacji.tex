The color checking matrix, defined in \cref{def:color checking matrix}, is not a knot invariant. Its size and structure changes as Reidemeister moves are applied to the diagram. Thus, we need to define which matrices stem from equivalent knot diagrams.

\subsection*{\centering R1}

\begin{center}
  \begin{tikzpicture}
    \draw[->] (0, 0)--(0, 1);
    \draw (0, 1)--(0, 2);
    \draw[dashed] (0, 1) ellipse (0.8 and 1);

    \begin{knot}[
        consider self intersections,
        ignore endpoint intersections=false,
        flip crossing=1,
        clip width=20pt
      ]
      \strand[->] (-3, 0) to[out=90, in=120] (-2.5, 1.3) to[out=-60, in=60] (-2.5, .7) to[out=-120, in=-90] (-3, 2);
    \end{knot}
    \draw[dashed] (-3, 1) ellipse (0.8 and 1);

    \draw[dashed] (3, 1) ellipse (0.8 and 1);
    \begin{knot}[
        consider self intersections,
        ignore endpoint intersections=false,
        clip width=20pt
        %flip crossing=1
      ]
      \strand[->] (3, 0) to[out=90, in=120] (3.5, 1.3) to[out=-60, in=60] (3.5, .7) to[out=-120, in=-90] (3, 2);
    \end{knot}
    \node at (0, -.5) {$D$};
    \node at (3, -.5) {$D_b'$};
    \node at (-3, -.5) {$D_a'$};

    \node at (-3.3, .6) {$x$};
    \node at (-3.3, 1.4) {$y$};

    \node at (2.7, .6) {$x$};
    \node at (2.7, 1.4) {$y$};

    %\node at (.3, .6) {$w$};

    \draw[<->] (-2, 1)--(-1, 1) node[midway, above] {$R1b$};
    \draw[<->] (2, 1)--(1, 1) node[midway, above] {$R1a$};
  \end{tikzpicture}
\end{center}

Both Reidemeister moves $R1a$ and $R1b$ require the following diagram to commute,
\begin{center}
  \begin{tikzcd}
    M^{s+1}\arrow[r, "D'\phi"]\arrow[d, twoheadrightarrow] & N^{x+1} \arrow[d, twoheadrightarrow] \\ 
    M^{s+1},\; x=y \arrow[d, "f" left] & N^x\oplus (N/\phi_\pm(M^3)) \arrow[d, "g"] \\ 
    M^s \arrow[r, "D\phi" below] & N^x
  \end{tikzcd}
\end{center}
where $\phi_\pm$ changes (for $R1a$ we have $+$ and for $R1b$ $-$). We take $f$ and $g$ to be given by
$$f(m_1,..., m_s, m_{s+1})=(m_1,..., m_s+m_{s+1})$$
$$g(n_1,..., n_x, n_{x+1})=(n_1,..., n_x+n_{x+1}).$$
The homomorphism $f$ ensures that on the rest of diagrams $D'$ arc labeled $x$ in figure above and $y$ add up to the arc visible in the diagram $D$. Meanwhile, $g$ ensures that the additional crossing is treated with the appropriate coloring rule.

In terms of matrices, the above diagram can be translated to
$$
\begin{matrix}
  D_a' & & D & & D_b'\\ 
  \begin{bmatrix}
    %&X & Y & \hdots\\ 
    b & a+c  & 0 & \hdots\\ 
    x_1 & y_1 & z_1 \\ 
    \vdots & & & \ddots
  \end{bmatrix} 
       & \overset{R1a}{\sim} &
     \begin{bmatrix}
       x_1 + y_1 & z_1 & \hdots\\ 
       \vdots & & \ddots
     \end{bmatrix} 
       & \overset{R1b}{\sim} &
  \begin{bmatrix}
    %&X & Y & \hdots\\ 
    \beta & \alpha+\gamma  & 0 & \hdots\\ 
    x_1 & y_1 & z_1 \\ 
    \vdots & & & \ddots
  \end{bmatrix} 
\end{matrix}
$$
where $(\forall\;i=1,...,x)\;x_i=0\;\lor y_i=0$.

\subsection*{\centering R2}

\begin{center}
  \begin{tikzpicture}
    \draw[dashed] (0, 0) ellipse (.8 and 1);
    \draw[dashed] (3, 0) ellipse (.8 and 1);

    \begin{knot}[
      % draft mode=crossings, 
      clip width = 4pt,
      flip crossing=1,
      flip crossing=2, 
      % ignore endpoint intersection=false
      ]
      \strand[->] (-75:.8 and 1) to [out=90, in=-90] (0, 0) to[out=90, in=-90] (75:.8 and 1);
      \strand[->] (-105:.8 and 1) to [out=90, in=-90] 
      (.35, 0) to [out=90, in=-90]
      (105:.8 and 1);
    \strand[->] ($(3, 0)+(-75:.8 and 1)$) -- ($(3, 0)+(75:.8 and 1)$);
    \strand[->] ($(3, 0)+(-105:.8 and 1)$) -- ($(3, 0)+(105:.8 and 1)$);
    \end{knot}

    \node at (-.2, -1.5) {$D'$};
    \node at (3, -1.5) {$D$};

    \node at (-.4, 0) {$y$};
    \node at (75:1 and 1.3) {$z$};
    \node at (-75:1 and 1.3) {$x$};
  \end{tikzpicture}
\end{center}

For the second Reidemeister move we will say that $D\phi$ and $D'\phi$ are in relation if the following diagram commutes:

\begin{center}
  \begin{tikzcd}
    M^{s+2}\arrow[r, "D'\phi"]\arrow[d, twoheadrightarrow] & N^{x+2} \arrow[d, twoheadrightarrow] \\ 
    M^{s+2}, x=z\arrow[d] & N^x\oplus (N/\phi_{\pm}(M^3))\oplus (N/\phi_\mp(M^3))\arrow[d]\\ 
    M^s\arrow[r, "D\phi" ] & N^x
  \end{tikzcd}
\end{center}

In terms of matrices, the following move is admitted:

$$
\begin{matrix}
  D' & D \\ 
  \begin{bmatrix} 
    b & c & 0 & a & \hdots \\ 
    0 & \beta & \gamma &\alpha \\ 
    x_1 & 0 & z_1 & w_1 \\ 
    \vdots & & & &\ddots
  \end{bmatrix} 
     & \begin{bmatrix} 
       x_1+z_1 & w_1 & \hdots \\ 
       \vdots & & \ddots
     \end{bmatrix}
\end{matrix}
$$
where $(\forall\; i=1,...,x)\;x_i=0\;\lor z_i=0$.

\subsection*{\centering R3}

\begin{center}
  \begin{tikzpicture}
    \begin{knot}[
      % draft mode=crossings, 
      clip width=15pt, 
      flip crossing=1, 
      flip crossing = 2, 
      flip crossing=3, 
      flip crossing=4, 
      flip crossing=6, 
      flip crossing=5
      ]
            \strand[->, thick] (3.8, -5)--(6, -2);
      \strand[->, thick] (4.3, -2)--(6.5, -5);
      \strand[<-, thick] (3.8, -4.2)--(6.5, -4.2);

      \strand[->, thick] (9.5, -5)--(11.7, -2);
      \strand[->, thick] (9, -2)--(11.2, -5);
      \strand[<-, thick] (9, -2.8)--(11.7, -2.8);
    \end{knot}

    \draw[dashed] (3.8, -5)--(6.5, -5)--(6.5, -2)--(3.8, -2)--cycle;
    \draw[dashed] (9, -5) rectangle (11.7, -2);
    
    \node at ( 6.5/2 + 3.8/2, -5.5) {$D$};
    \node at (9/2+11.7/2, -5.5) {$D'$};
  \end{tikzpicture}
\end{center}

{\large\color{purple}DOKOŃCZYĆ - czy tutaj komutujacy diagram cos da? znaczy w sumie to da, ale to jest jakies dzikie zamienianie wspolrzednych}

In terms of matrices, the following move is admitted: 

$$
\begin{matrix}
  D' & D \\ 
  \begin{bmatrix}
    \alpha & \gamma & \beta & 0 & 0 & 0 & \hdots \\ 
    0 & 0 & c & b & 0 & a \\ 
    \beta & 0 & 0 & 0 & \gamma & \alpha \\ 
    u_1 & 0 & v_1 & w_1 & x_4 & y_4 \\ 
    \vdots & & & & & & \ddots
  \end{bmatrix}
     & 
  \begin{bmatrix}
    0 & 0 & \gamma & \beta & \alpha & 0 & \hdots  \\ 
    \beta & 0 & 0 & 0 & \gamma & \alpha \\ 
    0 & c & b & 0 & 0 & a\\ 
    u_4 & 0 & v_4 & w_4 & x_4 & y_4\\ 
    \vdots & & &  & & \ddots
  \end{bmatrix}
\end{matrix}
$$

\begin{theorem}
  The equivalence class of a color checking matrix of a diagram $D\phi$ under relation generated by matrix relations $R1a$, $R1b$, $R2$ and $R3$ is a knot diagram. Thus we can define $K\phi:=[D\phi]$.
\end{theorem}

\begin{proof}
  A direct result of the definition of the equivalence relation.
\end{proof}
