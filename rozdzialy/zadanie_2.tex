%\color{red}

\section{A venture into the worlds of other rings with Euclidean algorithm (problems 2 and 3)}

We will start off by showing a result very useful to showing that a sequence is exact.

\begin{lemma}\label{dzielenie przez quotient rings}
  Let $I, J, K$ be ideals in a $PID$ ring $R$. If $I=JK$ and $I\subseteq K$, then $R/K\cong (R/I)/(R/J)$.
\end{lemma}

\begin{proof}
  Consider the following sequence
  \begin{center}\begin{tikzcd}
    0\arrow[r] & R/J \arrow[r, "f"] & R/I \arrow[r, "g"] & R/K \arrow[r] & 0
  \end{tikzcd}\end{center}
  We will show that it is exact sequence.

  Define $f:R/J\to R/I$ as
  $$f(x+J)=xK+JK=xK+I$$
  which gives us $\im f=K/I$. Of course, $f$ is a monomorphism, because
  $$f(x+J)=xK+JK=yK+JK=f(y+J)\implies (x-y)K\in JK\implies x-y\in J\implies x+J=y+J$$

  Now, let $g:R/I\to R/K$ be a quotient mapping
  $$g(x+I)=x+I+K=x+K$$ 
  and so $\ker g=K/I$.

  We showed that $\ker g=\im f$ and so the sequence above is exact and $R/K\cong (R/I)/(R/J)$.
\end{proof}

\begin{theorem}\label{decomposition theorem def order}
  Let $R$ be a $PID$ ring and $M$ be an $R$-module. Then there exist $p_1,....,p_n$ elements in $R$ such that 
  $$M\cong R/(p_1)\oplus R/(p_2)\oplus...R/(p_n).$$
  We will define the ideal $(p_1....p_n)$ that stems from the decomposition above as the order of module $M$ and denote it as $\ord(M)$. 

  Order of a module $M$ is well defined, that is if $M'\subseteq M$ is a submodule, then we have 
  $$\ord(M)=\ord(M')\ord(M/M')\;\cite{milnor_infinite_cyclic}.$$
\end{theorem}

%\section{Problem}

\subsection{When irreducible polynomials become prime numbers}

Consider a field $\mathfrak{K}$ and the ring of polynomials with coefficients in $\mathfrak{K}$, $\mathfrak{K}[x]$. Obviously, the aforementioned ring is a principial ideal domain. We want to consider group $\Z[[M]]$, where $[M]$ is the equivalence class of all finitely generated torsion modules isomorphic to $M$ and apply relation $\heartsuit$ to modules over the ring $\mathfrak{K}[x]$. That is, let $\heartsuit$ be the equivalence closure of relation: $[M_2]=[M_1]+[M_3]$ $\iff$ there exists an exact sequence
\begin{center}\begin{tikzcd}
  0\arrow[r] & M_1\arrow[r] & M_2\arrow[r] & M_3\arrow[r] & 0 
\end{tikzcd}\end{center}

\begin{example} As before, we will start by considering $\Q[x]$-modules
  $$M={\Q[x]}/{(x^3+1)}$$
  $$N={\Q[x]}/{(x+1)}\oplus{\Q[x]}/{(x^2-x+1)}$$
  Notice, that $x^2-x+1$ and $x+1$ are both irreducible over $\Q$ and that 
  $$x^3+1=(x+1)(x^2-x+1).$$
  We will show that
  $$\left[{\Q[x]}/{(x^3+1)}\right]=\left[{\Q[x]}/{(x+1)}\right]+\left[{\Q[x]}/{(x^2-x+1)}\right]=\left[{\Q[x]}/{(x+1)}\oplus{\Q[x]}/{(x^2-x+1)}\right]$$

  Exactness of sequence
  \begin{center}\begin{tikzcd}
    0\arrow[r] & {\Q[x]}/{(x+1)} \arrow[r, hookrightarrow] & {\Q[x]}/{(x+1)}\oplus{\Q[x]}/{(x^2-x+1)} \arrow[r, twoheadrightarrow] & {\Q[x]}/{(x^2-x+1)} \arrow[r] & 0
  \end{tikzcd}\end{center}
  is rather trivial: the left arrow is embedding of a summand to a direct sum and the right arrow is projection from direct sum.

  The second sequence,
  \begin{center}\begin{tikzcd}
    0\arrow[r] & {\Q[x]}/{(x+1)} \arrow[r] & {\Q[x]}/{(x^3+1)} \arrow[r] & {\Q[x]}/{(x^2-x+1)} \arrow[r] & 0
  \end{tikzcd}\end{center}
  is exact because $(x^3+1)\subseteq (x+1)$ and $(x+1)(x^2-x+1)=(x^3+1)$ allows us to use \cref{dzielenie przez quotient rings} to show that there exists an isomorphism
  $$\Q[x]/(x^2-x+1)\cong (\Q[x]/(x^3+1))/(\Q[x]/(x+1)).$$
\end{example}

In the previous section we showed that all Abelian groups of the same order (understood then as the number of elements) are in the same equivalence class. Now, we will show that the same is true for modules over a ring of polynomials, with order understood as a polynomial.

\begin{lemma}
  Let $\mathfrak{K}$ be a field and consider $\mathfrak{K}[x]$-module $M$ with $\ord(M)=(p_1....p_n)$, $p_i$ are irreducible polynomials. Then 
  $$[M]_\heartsuit=\sum_{i=1}^n [R/(p_i)]_\heartsuit$$
  %irreducible polynomials $p_i$ that appear in decomposition of $M$ are the same to the ones that appear in decomposition of $M'$.
\end{lemma}

\begin{proof}
  We will use induction on the number of polynomials $n$ in decomposition of $\ord(M)$. 

  \begin{enumerate}
    \item $n=1$ 

      This of course means that $M\cong R/(p_1)$ and so $[M]_\heartsuit=[R/(p_1)]_\heartsuit$.
    \item $n\implies n+1$ 

      First, notice that $R/(p_{n+1})\subseteq M$ and so 
      $$(p_1...p_np_{n+1})=\ord(M)=(p_{n+1})\ord(M/(p_{n+1}))=(p_{n+1})\ord(M/(p_{n+1}))$$
      implies that $\ord(M/(p_{n+1}))=(p_1....p_n)$. From inductive hypothesis we know that 
      $$[M/(p_{n+1})]_\heartsuit=\sum_{i=1}^n[R/(p_i)]_\heartsuit.$$
      We know that sequence
      \begin{center}\begin{tikzcd}
        0\arrow[r] & R/(p_{n+1})\arrow[r] & M\arrow[r] & M/(p_{n+1}) \arrow[r] & 0 
      \end{tikzcd}\end{center}
      is exact, hence
      $$[M]_\heartsuit=[R/(p_{n+1})]_\heartsuit+[M/(p_{n+1})]_\heartsuit=\sum_{i=1}^{n+1}[R/(p_i)]_\heartsuit.$$
  \end{enumerate}
\end{proof}

{\color{red}
\subsection{Vector space as a $\mathfrak{K}[x]$-module}

{\large\color{cyan}DO DOPRACOWANIA, BO NAPISAŁAM JAKOŚ KRZYWO, może coś o Jordan basis?}

Let $V$ be a vector space over a field $\mathfrak{K}$. Take $f:V\to V$ to be any endomorphism of $V$. We can now consider $V$ as a $\mathfrak{K}[x]$-module, with multiplication of $v\in V$ by $w(x)=\sum \alpha_ix^i \in \mathfrak{K}[x]$ defined as:
$$w\cdot v=(w(f))(v)=(\sum \alpha_if^i)(v)=\sum \alpha_i\cdot f^i(v),$$
where $f^i=\underbrace{f\circ...\circ f}_{\text{i times}}$.

For a fixed vector space $V$ (for simplicity let $V=\mathfrak{K}^n$) consider all the $\mathfrak{K}[x]$-modules created by choosing different endomorphisms $f:V\to V$, where endomorphisms that are represented by similar matrices will be treated as one object. 

If an endomorphism $f:\mathfrak{K}^n\to\mathfrak{K}^n$ is represented by matrix $A$, then we know that there exists a polynomial $w\in\mathfrak{K}[x]$ such that for every $v\in\mathfrak{K}^n$ $w\cdot v=0$, because any collection of at least $n+1$ vectors from $\mathfrak{K}^n$ cannot be linearly independent. Thus we know that $\mathfrak{K}^n$ is a torsion module over $\mathfrak{K}$.

The characteristic polynomial of $A$, $\chi_A(x)=\sum \alpha_ix^i$ is defined as $\det(Ix-A)$, where $I$ is the identity matrix. We know that $\chi_A(x)=\prod (x-\lambda_i)$, where $\lambda_i$ are all the eigenvalues of $A$. There are at most $n$ eigenvectors of $A$ and they are all killed by $\chi_A(x)$. This means, that 
$$(\mathfrak{K}^n; f)\cong R/(\chi_A)$$

Hence, $[(\mathfrak{K}^n; f)]_\heartsuit=[(\mathfrak{K}^n; g)]_\heartsuit\iff \chi_f(x)=\chi_g(x)$ and every vector space can be expressed as
$$[(\mathfrak{K}^n;f)]_\heartsuit=\sum_{i=1}^n[R/(x-\lambda_i)]_\heartsuit$$
where $\lambda_i$ are the eigenvalues of $f$.
}

\section{Ta ambitna część dyskursu}
%{\color{cyan}
%Patrzę sobie na pierścień $\Z[x]$ i tam mam ideał $(2, x)$. Jeśli ten ideał przemnożę przez $(4)$, to dostaję $(2, x)(4)=(8, 4x)$ nadal nie jest reprezentowalny przez jednego ziomka. Mogę więc napisać ciąg dokładny
%\begin{center}\begin{tikzcd}
%  0\arrow[r] & \Z[x]/(4, x)\arrow[r] & \Z[x]/(8, 2x, x^2)\arrow[r] & \Z[x]/(2, x)\arrow[r] & 0 
%\end{tikzcd}\end{center}
%Czyli
%
%$$[\Z[x]/(4, x)\oplus\Z[x]/(2, x)]=[\Z[x]/(4)]+[\Z[x]/(2, x)]=[\Z[x]/(8, 4x)]$$
%ale wiem też, że 
%$$\Z[x]/(4)\oplus\Z[x]/(2, x)\cong\Z/((4)\cap (2, x))=\Z/(8, 4x)$$
%co nic mi nie daje w sumie.
%
%Chyba chce tutaj jakiś przykład, który nie wykorzystuje lematu tam z góry?
%
%Dobra, wiem, że każdy $\Z[x]$-moduł mogę potraktować jako $\Z$-moduł, tylko niekoniecznie skończenie generowany $\Z[x]$ będzie skończenie generowany jako $\Z$-moduł (choćby $(x)$ nie jest generowany przez $x$ w $\Z[x]$, ale jako $\Z$-moduł generują go wszystkie potęgi $x$, których jest nieskończenie wiele). 
%
%Czym jest $(2, x)/(2)$? To nie jest jakieś $\Z_2[x]$?
%}

\begin{theorem}\label{rozklad torsyjnego}
  Any torsion $\Z[x]$-module $M$ with $n$ generators $e_1,...,e_n$ is isomorphic to direct product
  $$M\cong \Z[x]/(\ann(e_1))\oplus \Z[x]/(\ann(e_2))\oplus...\oplus \Z[x]/(\ann(e_n))$$
\end{theorem}

\begin{proof}
  We will use induction on the number of generators $n$.
  \begin{enumerate}
    \item $n=1$ then $M$ is a cyclic module and the case is rather trivial.
    \item $n\implies n+1$

      Let $M'$ be a submodule of $M$ generated by $e_1,...,e_n$ and let $M''$ be a submodule of $M$ generated by $e_{n+1}$. Then $M\cong M'\oplus M''$. From inductive hypothesis we have that 
      $$M'\cong \Z[x]/(\ann(e_1))\oplus...\oplus \Z[x]/(\ann(e_n))$$
      and
      $$M''\cong \Z[x]/(\ann(e_{n+1}))$$
      hence
      $$M\cong M'\oplus M''\cong\Z[x]/(\ann(e_1))\oplus...\Z[x]/(\ann(e_n))\oplus\Z[x]/(\ann(e_{n+1})).$$
  \end{enumerate}
\end{proof}

\begin{lemma}
  Summands that appear in decomposition of a finitely generated torsion module presented in \cref{rozklad torsyjnego} are uniquely determined.
\end{lemma}

\begin{proof}
  Firstly, notice that a torsion finitely generated module is Artinian and Noetherian and thus has a well defined composition series. From Jordan-H\"older theorem it follows that any two such composition series have the same number of elements that are isomorphic in pairs.

  Let 
  $$0\subset M_1\subset M_2\subset...M_k$$ 
  and 
  $$0\subset M_1'\subset M_2'\subset...\subset M_k'$$ 
  be two composition series of finitely generated torsion module $M$ with $n$ coordinates. \Cref{rozklad torsyjnego} states that both $M_k$ and $M_k'$ must have $n$ summands. Furthermore, we know that both $M_1$ and $M_1'$ must have just one coordinate. From this we can deduce that subsequent modules of each composition series must gradually build up to having $n$ summands (coordinates). Hence, if $M_i\subset M_{i+1}$ is such that $M_i$ has $m$ summands while $M_{i+1}$ has $m+1$ summands, then 
  $$M_i\cong \Z[x]/(\ann(e_{i_1}))\oplus...\Z[x]/(\ann(e_{i_m}))$$
  while
  $$M_{i+1}\cong \Z[x]/(\ann(e_{i_1}))\oplus...\Z[x]/(\ann(e_{i_m}))\oplus N$$
  where $N\neq 0$. And if $M_j'\subset M_{j+1}'$ are analogous steps in the second composition series, that is if $M_j'$ also has $m$ summands while $M_{j+1}'$ has $m+1$ of them, then from Jordan-H\"older theorem we can conclude that $M_j'\cong M_i$. Thus, the decomposition has summands unique up to isomorphism.
\end{proof}

\begin{example}
  Consider module $M=\Z_2[x]\oplus \Z$, where $\Z$ we treat as a $\Z[x]$-module. That is, multiplying by $x$ is the same as multiplying by $0$ in $\Z$. Then the generators are $1+(2)$ and $1+(x)$ and the annihilator of the whole module is $\ann(M)=(2x)$. At the same time, we have
  $$\Z_2[x]\oplus\Z\cong (\Z[x]/(2))\oplus (\Z[x]/(x))$$
  where $(2)$ is the annihilator of $\Z_2[x]$ and $(x)$ annihilates $\Z[x]/(x)$.
%\end{example}
%
%PROBLEMY:
%\begin{itemize}
%  \item Czy rozkład jak w lemacie 3.1 jest jednoznaczny? $e_1, e_2, e_3$ $e_1+e_2, 2e_2-e_3, e_1+e_3$, $e_1=1+(3), e_2=1+(9), e_3=1+(27)$ $\Z[x]/(3)\oplus \Z[x]/(9)\oplus\Z[x]/(27)$
%\end{itemize}
%$$\ann(M):=(0:M)$$
%$r\in(N:P)\iff rP\subseteq N$
%$$(N:P)=\ann((N+P)/N)$$
%
%$M', M/M'\subseteq M$, $(M':M/M')=\ann((\underbrace{M'+M/M'}_{M})/M')=\ann(M/M')$
%$$M'\oplus M/M'\cong M$$
%
%$$\ann(M')\cap \ann(M/M')=\ann(M)$$

$$[\Z_2[x]\oplus\Z]_\heartsuit = [\Z[x]/(2x)]_\heartsuit$$

\begin{center}\begin{tikzcd}
  0\arrow[r] & \Z[x]/(2) \arrow[r, "\cdot x"] & \Z[x]/(2x) \arrow[r, "x=0"] & \Z[x]/(x) \arrow[r] & 0
\end{tikzcd}\end{center}
\end{example}

$$\Z[x]/(2, x)\subseteq \Z[x]/(2x)$$

Warunek konieczny na bycie w tej samej klasie równoważności to równość anihilatorów.

Jeśli w \cref{rozklad torsyjnego} ograniczymy się do cyklicznych prostych modułów torsyjnych i ich sum prostych to warunek konieczny jest też warunkiem dostatecznym.
